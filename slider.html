<html>
  <head>
    <meta charset="UTF-8">
    <link href='http://fonts.googleapis.com/css?family=Cuprum&subset=cyrillic,latin' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="normalize.css">
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
    <title>Yandex</title>
  </head>
  <body>

    <div id="container">

      <div id="active">

      </div>

      <div id="slides">

        <div class="slides-slider">
          <div class="slide view" id="item-0">
            <h2 class="slide-header">Some Text 0</h2>

            <div class="content">Some Text 3</div>
          </div>
          <div class="slide" id="item-1">
            <h2 class="slide-header">Image</h2>

            <div class="content">Image</div>
          </div>
          <div class="slide" id="item-2">
            <h2 class="slide-header">Table</h2>

            <div class="content">Table</div>
          </div>
          <div class="slide" id="item-3">
            <h2 class="slide-header">Some Text</h2>

            <div class="content">Some Text</div>
          </div>
          <div class="slide" id="item-4">
            <h2 class="slide-header">Some Text 2</h2>

            <div class="content">Some Text 2</div>
          </div>
          <div class="slide" id="item-5">
            <h2 class="slide-header">Some Text 3</h2>

            <div class="content">Some Text 3</div>
          </div>
          <div class="slide" id="item-6">
            <h2 class="slide-header">Some Text 4</h2>

            <div class="content">Some Text 3</div>
          </div>
          <div class="slide" id="item-7">
            <h2 class="slide-header">Some Text 5</h2>

            <div class="content">Some Text 6</div>
          </div>
          <div class="slide" id="item-8">
            <h2 class="slide-header">Some Text 7</h2>

            <div class="content">Some Text 8</div>
          </div>
        </div>

      </div>

    </div>

    <script type="text/javascript">

      $(document).ready(function(){

        function Slider(elem){
          this.children = elem.children();
          this.slideWidth = this.children.width();
          this.slideLength = this.children.length;

          elem.width(this.slideWidth * this.slideLength + ((this.slideLength + 1) * 8));
          elem.children().width(this.slideWidth);

          this.current = 0;

        }

        var slider = new Slider( $('.slides-slider') );

        Slider.prototype.setCurrent = function (dir){

          //Write value
          var pos = this.current;

          //Change if arrow keydown
          pos += ( ~~( dir === 'next' ) || ~~( -(dir === 'prev') ) );

          //Rewrite Current Value
          this.current = (pos < 0) ? this.slideLength - 1 : pos % this.slideLength;

          //Write id for DOM
          var activeSlide = $('#item-' + this.current);

          //Make Active and big
          activeSlide.addClass('view').siblings().removeClass('view');
          $('#active').html(activeSlide.html());

          this.children.on('click', function(){
            $(this).addClass('view').siblings().removeClass('view');
            $('#active').html($(this).html());

            this.current = function (){
              var qq = document.getElementsByClassName('slide'),
                  qq2 = document.getElementsByClassName('view');

              for (i=0; i<qq.length; i++){
                if (qq[i] === qq2[0]){
                  var f = i;
                }
              }
              return f;
            };
            return i;
          });

          console.log($('.view').attr('id'));
        };


        $(document).bind('keydown', function(e){
          switch(e.keyCode)
          {
            case 37:
              var dir = 'prev';
              break;
            case 38:
              dir = 'prev';
              break;
            case 39:
              dir = 'next';
              break;
            case 40:
              dir = 'next';
              break;
            default:
              break;
          }
          slider.setCurrent(dir);
        });

        //Run Once
        slider.setCurrent(this.current);

      });
    </script>
  </body>
</html>
